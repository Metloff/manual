# Shell sort (Сортировка Шелла)

**Свойства:**
  
**Временная сложность:**
- Худшее время: `O(N^2)`
- Среднее время: `зависит от выбранных шагов`
- Лучшее время: `O(N*(log(N))^2)`

**Описание:**

**Сортировка Шелла** (англ. Shell sort) — алгоритм сортировки, являющийся усовершенствованным вариантом сортировки вставками. Идея метода Шелла состоит в сравнении элементов, стоящих не только рядом, но и на определённом расстоянии друг от друга. Иными словами — это сортировка вставками с предварительными «грубыми» проходами. Аналогичный метод усовершенствования пузырьковой сортировки называется сортировка расчёской.

При сортировке Шелла сначала сравниваются и сортируются между собой значения, стоящие один от другого на некотором расстоянии `d`. После этого процедура повторяется для некоторых меньших значений `d`, а завершается сортировка Шелла упорядочиванием элементов при `d=1` (то есть обычной сортировкой вставками). Эффективность сортировки Шелла в определённых случаях обеспечивается тем, что элементы «быстрее» встают на свои места (в простых методах сортировки, например, пузырьковой, каждая перестановка двух элементов уменьшает количество инверсий в списке максимум на 1, а при сортировке Шелла это число может быть больше).

## Пример

Выбираем подсписки с `d = 3`
![](../../../assets/img/shellsortA.png)

Сортируем их и получаем частично отсортированный список
![](../../../assets/img/shellsortB.png)

Совершаем окончательную сортировку вставками с использованием `d = 1` - другими словами, стандартную сортировку вставками
![](../../../assets/img/shellsortC.png)

## Сравнение

Невзирая на то, что сортировка Шелла во многих случаях медленнее, чем быстрая сортировка, она имеет ряд преимуществ:

- отсутствие потребности в памяти под стек;
- отсутствие деградации при неудачных наборах данных — быстрая сортировка легко деградирует до O(n²), что хуже, чем худшее гарантированное время для сортировки Шелла.


## Литература
- [wiki](https://ru.wikipedia.org/wiki/%D0%A1%D0%BE%D1%80%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0_%D0%A8%D0%B5%D0%BB%D0%BB%D0%B0)
- [Problem Solving with Algorithms and Data Structures](http://aliev.me/runestone/SortSearch/TheShellSort.html)